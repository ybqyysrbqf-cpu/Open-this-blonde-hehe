<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hey</title>

<style>
  body{
    background:#fff0f5;
    font-family:-apple-system, BlinkMacSystemFont, system-ui;
    text-align:center;
    padding:20px;
    overflow:hidden;
  }

  h1{margin-top:10px;}

  #message{
    font-size:22px;
    margin:20px;
    white-space:pre-line;
    position:relative;
    z-index:10;
  }

  button{
    padding:14px 28px;
    font-size:22px;
    border:none;
    border-radius:14px;
    margin:12px;
    cursor:pointer;
    transition:all .3s ease;
  }

  #startBtn{background:#ffd1dc;}
  #yesBtn{background:#ffb6c1;}
  #noBtn{background:#add8e6; position:relative;}
  #restartBtn{background:#90ee90; display:none;}

  #catImage{
    width:220px;
    border-radius:14px;
    display:none;
    position:relative;
    z-index:5;
  }

  .catBurst{
    position:absolute;
    width:70px;
    opacity:.85;
    pointer-events:none;
    z-index:1;
    transition:all 3s ease;
  }
</style>
</head>

<body>

<h1>Hey Akumla ğŸ‘‹</h1>

<button id="startBtn">Start</button>

<div id="questionDiv" style="display:none;">
  <div id="message">Can I be your boyfriend?</div>
  <button id="yesBtn">Yes</button>
  <button id="noBtn">No</button>
</div>

<img id="catImage">
<button id="restartBtn">Letâ€™s start over</button>

<script>
/* ================= AUDIO SYSTEM (ONLY ONE) ================= */
let currentAudio = null;

function playAudio(file, start, end=null, loop=false){
  if(currentAudio){
    currentAudio.pause();
    currentAudio.currentTime = 0;
  }
  currentAudio = new Audio(file);
  currentAudio.currentTime = start;
  currentAudio.loop = loop;
  currentAudio.play().catch(()=>{});

  if(end !== null){
    const stop = setInterval(()=>{
      if(currentAudio.currentTime >= end){
        currentAudio.pause();
        clearInterval(stop);
      }
    },200);
  }
}

/* ================= ELEMENTS ================= */
const startBtn = document.getElementById("startBtn");
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const message = document.getElementById("message");
const questionDiv = document.getElementById("questionDiv");
const restartBtn = document.getElementById("restartBtn");
const catImage = document.getElementById("catImage");

/* ================= STATE ================= */
let noCount = 0;
let yesScale = 1;

/* ================= CONTENT ================= */
const noMessages = [
  "Lemme ask you again ğŸ¥º",
  "Are you sure Akumla?\nIf you say yes Iâ€™ll make cute edits of you ğŸ¥º",
  "Are you sure no?",
  "Noâ€¦ I long for you Akumla ğŸ˜­",
  "You know how much I like you Akumla?\nThink again ğŸ’­",
  "No I wonâ€™t let you go ğŸ˜’",
  "Say yes ğŸ˜‹",
  "I donâ€™t care say yes noww ğŸ˜—",
  "Say yes already blonde ğŸ‘±ğŸ»â€â™€ï¸ğŸ˜’",
  "Iâ€™m not tired! Are you?\nLetâ€™s start over hehe ğŸ˜ˆ"
];

const cats = [
  "https://cataas.com/cat/cute?width=300",
  "https://cataas.com/cat/kitten?width=300",
  "https://cataas.com/cat/funny?width=300",
  "https://cataas.com/cat/says/Hi%20Akumla%20ğŸ¾",
  "https://cataas.com/cat/says/Meow%20ğŸ˜¼"
];

function showCat(){
  catImage.src = cats[Math.floor(Math.random()*cats.length)];
  catImage.style.display="block";
}

function catBurst(count){
  for(let i=0;i<count;i++){
    const img=document.createElement("img");
    img.src=cats[Math.floor(Math.random()*cats.length)];
    img.className="catBurst";
    img.style.left=Math.random()*window.innerWidth+"px";
    img.style.top=Math.random()*window.innerHeight+"px";
    document.body.appendChild(img);
    setTimeout(()=>{
      img.style.transform="translateY(-600px) rotate(360deg)";
    },50);
  }
}

/* ================= START ================= */
startBtn.onclick = ()=>{
  startBtn.style.display="none";
  questionDiv.style.display="block";
  playAudio("./startSong.mp3",1,null,true);
  showCat();
};

/* ================= NO ================= */
noBtn.onclick = ()=>{
  if(noCount>=10) return;
  noCount++;
  message.textContent = noMessages[noCount-1];
  yesScale += 0.12;
  yesBtn.style.transform = `scale(${yesScale})`;
  showCat();

  if(noCount===2) playAudio("./noSong1.mp3",32,112);
  if(noCount===5) playAudio("./noSong2.mp3",1,30);
  if(noCount===7) playAudio("./noSong3.mp3",1,30);
  if(noCount===10){
    playAudio("./noSong3.mp3",260,285);
    restartBtn.style.display="inline-block";
  }

  noBtn.style.left=(Math.random()*200-100)+"px";
  noBtn.style.top=(Math.random()*200-100)+"px";
};

/* ================= YES ================= */
yesBtn.onclick = ()=>{
  playAudio("./yesSong.mp3",40,81);

  message.textContent =
    "Yay Akumla ğŸ˜„\n\n"+
    "I canâ€™t stop thinking about you ğŸ’™\n"+
    "I would never cheat.\n"+
    "Iâ€™ll only have eyes on you.";

  catBurst(10);
  alert("Send this to me: OK YES IDIOT");
};

/* ================= RESTART ================= */
restartBtn.onclick = ()=>{
  noCount=0;
  yesScale=1;
  message.textContent="Can I be your boyfriend?";
  yesBtn.style.transform="scale(1)";
  restartBtn.style.display="none";
  playAudio("./startSong.mp3",1,null,true);
  showCat();
};
</script>

</body>
</html>
